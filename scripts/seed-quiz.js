const { createClient } = require('@supabase/supabase-js');

const supabaseUrl = process.env.SUPABASE_URL;
const supabaseKey = process.env.SUPABASE_ANON_KEY;
const supabase = createClient(supabaseUrl, supabaseKey);

const quizzes = [
  {
    "question": "消防法上の危険物に関する記述として、正しいものはどれか。",
    "choices": [
      "消防法別表の品名欄に掲げる物品で、指定数量以上のものをいう。",
      "消防法別表の品名欄に掲げる物品で、同表に定める区分に応じ同表の性質欄に掲げる性質を有するものをいう。",
      "消防庁長官が告示で定めた物品をいう。",
      "都道府県知事が条例で指定した物品をいう。",
      "固体または気体の引火性・発火性物質をいう。"
    ],
    "correct_index": 1,
    "explanations": [
      "誤り。消防法上の危険物の定義に指定数量は含まれない。指定数量は規制の基準量であり、危険物の定義とは別の概念である。",
      "正しい。消防法第2条第7項の規定どおり、危険物は消防法別表の品名欄に掲げる物品で、同表に定める区分に応じ同表の性質欄に掲げる性質を有するものと定義されている。",
      "誤り。危険物は消防法（国の法律）で定められるものであり、消防庁長官の告示ではない。",
      "誤り。危険物は消防法で全国一律に定められており、都道府県知事が条例で指定するものではない。",
      "誤り。消防法上の危険物は固体または液体に限られる。気体は含まれない点に注意が必要。"
    ],
    "advice": "危険物の定義のポイントは「別表の品名欄＋性質欄」の2要件のみ。指定数量・気体・告示・条例はすべて誤りのひっかけワードとして頻出。",
    "category_id": "L02",
    "source": "予想問題_変種",
    "format": "五肢択一"
  },
  {
    "question": "法に定める危険物の品名と石油類の区分について、誤っているものはどれか。",
    "choices": [
      "二硫化炭素は特殊引火物に該当する。",
      "ガソリンは第1石油類に該当する。",
      "灯油は第2石油類に該当する。",
      "シリンダー油は第3石油類に該当する。",
      "ギヤー油は第4石油類に該当する。"
    ],
    "correct_index": 3,
    "explanations": [
      "正しい。二硫化炭素は引火点-30℃以下・沸点35℃以下の特殊引火物に該当する。",
      "正しい。ガソリンは引火点-40℃以下で第1石油類（非水溶性）に該当する。",
      "正しい。灯油は引火点40℃以上70℃未満の第2石油類（非水溶性）に該当する。",
      "誤り。シリンダー油は第4石油類に該当する。第3石油類（引火点70℃以上200℃未満）には重油や潤滑油の一部が該当するが、シリンダー油は引火点200℃以上の第4石油類である。",
      "正しい。ギヤー油は引火点200℃以上の第4石油類に該当する。"
    ],
    "advice": "第4石油類（引火点200℃以上）の代表例はシリンダー油・ギヤー油・タービン油。「シリンダー＝シ（4）リンダー」と語呂合わせで覚えよう。",
    "category_id": "C04",
    "source": "予想問題_変種",
    "format": "五肢択一"
  },
  {
    "question": "次の危険物を同一の屋内貯蔵所に貯蔵する場合、指定数量の倍数の合計として正しいものはどれか。\n【危険物】ガソリン400L、灯油2,000L",
    "choices": [
      "2倍",
      "3倍",
      "4倍",
      "5倍",
      "6倍"
    ],
    "correct_index": 2,
    "explanations": [
      "誤り。ガソリンの倍数のみ（400÷200＝2）を答えとした誤り。灯油の倍数も加算する必要がある。",
      "誤り。灯油の指定数量を2,000Lと誤って認識した場合の計算誤り例（400/200+2000/2000=2+1=3）。灯油の指定数量は1,000Lである。",
      "正しい。ガソリンは第1石油類非水溶性で指定数量200L。灯油は第2石油類非水溶性で指定数量1,000L。倍数＝400÷200＋2,000÷1,000＝2＋2＝4倍。",
      "誤り。ガソリンの指定数量を100Lと誤った場合の計算例（400/100+2000/1000=4+2=6ではなく4+1=5）。指定数量の誤認から生じる誤答。",
      "誤り。両方の指定数量を過小に見積もった計算誤り例。"
    ],
    "advice": "指定数量の倍数合計＝各危険物の（貯蔵量÷その指定数量）をすべて足すだけ。ガソリン200L・灯油1,000Lは必ず暗記。",
    "category_id": "L01",
    "source": "予想問題_変種",
    "format": "五肢択一"
  },
  {
    "question": "液体危険物タンクを有する製造所等の変更工事における手続きに関する記述として、法令上正しいものはどれか。",
    "choices": [
      "変更工事に着手した後に、市町村長等へ変更許可申請を行えばよい。",
      "変更工事に係る部分以外の部分を使用する場合は、都道府県知事の承認を受けなければならない。",
      "液体危険物タンクの変更に係る部分は、完成検査前に工程ごとの市町村長等の検査を受けなければならない。",
      "完成検査を受けなくても、変更工事完了後は直ちに使用を開始できる。",
      "予防規程を変更する必要が生じた場合、届出のみで足り、認可は不要である。"
    ],
    "correct_index": 2,
    "explanations": [
      "誤り。変更許可は工事着手前に受けなければならない。許可前に着手することは違法である。",
      "誤り。承認を行うのは都道府県知事ではなく市町村長等である。",
      "正しい。液体危険物タンクの変更に係る部分は、完成検査の前に政令で定める工程ごとに市町村長等が行う完成検査前検査を受けなければならない。",
      "誤り。完成検査を受け、基準に適合していると認められた後でなければ使用してはならない。",
      "誤り。予防規程の変更は届出ではなく、市町村長等の認可が必要である。"
    ],
    "advice": "液体危険物タンクの変更は「許可→工程検査（完成検査前検査）→完成検査→使用開始」の順番をセットで覚えること。",
    "category_id": "L09",
    "source": "予想問題_変種",
    "format": "五肢択一"
  },
  {
    "question": "製造所等の完成検査に関する記述として、誤っているものはどれか。",
    "choices": [
      "完成検査は市町村長等が行う。",
      "完成検査において基準に適合していると認められた後でなければ、製造所等を使用してはならない。",
      "液体の危険物を貯蔵又は取り扱うタンクを有する製造所等は、完成検査の前に完成検査前検査を受けなければならない場合がある。",
      "変更工事に係る部分以外の部分は、市町村長等の承認（仮使用）があれば使用できる。",
      "完成検査に合格した後に、製造所等の設置許可申請を行う。"
    ],
    "correct_index": 4,
    "explanations": [
      "正しい。完成検査は市町村長等（市町村長、都道府県知事、または総務大臣）が行う。",
      "正しい。完成検査で基準適合と認められるまでは使用禁止が原則である。",
      "正しい。液体危険物タンクを有する製造所等は、タンク部分について完成検査前検査（工程検査）が必要な場合がある。",
      "正しい。変更工事中でも、工事部分以外は市町村長等の仮使用承認があれば使用できる。",
      "誤り。設置許可は工事着手前に取得するものである。完成検査→使用開始の前段階が許可→工事着手であり、順序が逆である。"
    ],
    "advice": "流れは「設置許可申請→許可→工事→完成検査→使用開始」。設置許可が完成検査より先にくることを絶対に覚えておこう。",
    "category_id": "L09",
    "source": "予想問題_変種",
    "format": "五肢択一"
  },
  {
    "question": "製造所等の定期点検に関する記述として、正しいものはどれか。ただし、漏れの点検および固定式泡消火設備に関する点検を除く。",
    "choices": [
      "甲種危険物取扱者のみが定期点検を実施できる。",
      "丙種危険物取扱者は定期点検を実施できない。",
      "危険物施設保安員は、甲種または乙種危険物取扱者の立会いがなければ定期点検を実施できない。",
      "定期点検の結果は3年間保存しなければならない。",
      "定期点検の結果は、毎年1回、管轄の市町村長等に報告しなければならない。"
    ],
    "correct_index": 3,
    "explanations": [
      "誤り。甲種・乙種・丙種いずれの危険物取扱者も定期点検を実施できる。",
      "誤り。丙種危険物取扱者も定期点検を実施できる。立会いができないのは危険物取扱者以外の者への立会いの場合であり、自ら点検することは可能である。",
      "誤り。危険物施設保安員は甲種または乙種危険物取扱者の立会いなしに定期点検を実施できる。",
      "正しい。定期点検の結果は3年間保存しなければならない。市町村長等への報告義務はない。",
      "誤り。定期点検の結果について市町村長等への定期報告義務は法令上定められていない。記録を3年間保存することが義務である。"
    ],
    "advice": "定期点検の記録は「3年間保存」が正解。「市町村長等への報告義務なし」はひっかけ頻出。点検できる者は甲乙丙＋施設保安員（立会い不要）。",
    "category_id": "L11",
    "source": "予想問題_変種",
    "format": "五肢択一"
  },
  {
    "question": "危険物の取扱作業の保安に関する講習について、正しいものはどれか。",
    "choices": [
      "危険物保安監督者は講習を受講する義務がない。",
      "製造所等で危険物の取扱作業に従事していない危険物取扱者も、全員受講義務がある。",
      "受講義務のある危険物取扱者が受講しなかった場合、免状を即時取り消される。",
      "甲種危険物取扱者は5年に1回、乙種危険物取扱者は3年に1回受講しなければならない。",
      "受講は、免状を交付した都道府県以外の都道府県で実施されるものでも有効である。"
    ],
    "correct_index": 4,
    "explanations": [
      "誤り。危険物保安監督者は受講義務がある対象者に含まれる。",
      "誤り。受講義務があるのは製造所等で危険物の取扱作業に従事している危険物取扱者に限られる。従事していない者は義務対象外。",
      "誤り。未受講の場合は免状返納命令の対象となるが、即時取り消しではない。まず命令が出され、従わない場合に返納となる。",
      "誤り。甲種・乙種・丙種いずれも免状の種類にかかわらず、3年以内ごとに1回の受講が必要である。",
      "正しい。保安講習は全国どこの都道府県で行われているものでも受講することができる。"
    ],
    "advice": "保安講習は「免状の種類に関わらず全員3年以内ごと」「どこの都道府県でも受講OK」の2点が頻出ポイント。丙種だけ5年は誤りの典型例。",
    "category_id": "L11",
    "source": "予想問題_変種",
    "format": "五肢択一"
  },
  {
    "question": "製造所等において危険物取扱者以外の者が危険物を取り扱う場合の立会いに関する記述として、正しいものはどれか。",
    "choices": [
      "甲種危険物取扱者が同じ施設に在籍していれば、立会いなしで危険物を取り扱える。",
      "乙種第4類の免状を持つ危険物取扱者が立会えば、第4類のすべての危険物を取り扱える。",
      "危険物保安監督者が選任されていれば、立会いなしで危険物を取り扱える。",
      "丙種危険物取扱者は危険物取扱者以外の者が危険物を取り扱う際の立会いができる。",
      "危険物施設保安員が立会えば、危険物取扱者以外の者でも危険物を取り扱える。"
    ],
    "correct_index": 1,
    "explanations": [
      "誤り。在籍しているだけでは不十分で、実際に立会いを行う必要がある。",
      "正しい。乙種危険物取扱者は自己の免状に対応した類の危険物について立会いができる。乙種第4類であれば第4類全般（ガソリン・灯油・軽油・重油等）の取扱いに立会える。",
      "誤り。危険物保安監督者が選任されていても、立会いを行わなければ危険物取扱者以外の者は取り扱えない。",
      "誤り。丙種危険物取扱者は立会いができない。立会いができるのは甲種および乙種危険物取扱者のみ。",
      "誤り。危険物施設保安員は危険物取扱者ではないため、立会いの権限を持たない。"
    ],
    "advice": "立会いができるのは「甲種・乙種のみ Jockey 丙種と施設保安員はNG。乙種は自分の免状の類のみ立会い可能という範囲制限も覚えよう。",
    "category_id": "L10",
    "source": "予想問題_変種",
    "format": "五肢択一"
  },
  {
    "question": "保有空地が必要な製造所等の組み合わせとして、正しいものはどれか。",
    "choices": [
      "製造所、地下タンク貯蔵所、屋外タンク貯蔵所",
      "屋内タンク貯蔵所、屋内貯蔵所、一般取扱所",
      "製造所、屋内貯蔵所、屋外貯蔵所",
      "給油取扱所、販売取扱所、移動タンク貯蔵所",
      "簡易タンク貯蔵所、地下タンク貯蔵所、第1種販売取扱所"
    ],
    "correct_index": 2,
    "explanations": [
      "誤り。地下タンク貯蔵所は地中に埋設されているため保有空地は不要。屋外タンク貯蔵所は必要。製造所は必要。",
      "誤り。屋内タンク貯蔵所は保有空地不要。屋内貯蔵所と一般取扱所は必要。3つ全部が必要な組み合わせではない。",
      "正しい。製造所・屋内貯蔵所・屋外貯蔵所はいずれも保有空地が必要な施設である。",
      "誤り。給油取扱所・販売取扱所・移動タンク貯蔵所はいずれも保有空地不要の施設。",
      "誤り。簡易タンク貯蔵所は保有空地が必要だが、地下タンク貯蔵所・販売取扱所は不要。"
    ],
    "advice": "保有空地不要の施設は「地下・屋内タンク・給油・販売・移動タンク・屋内タンク」と語呂で整理。残り（製造所・屋内貯・屋外貯・屋外タンク・一般取扱・簡易タンク）は必要。",
    "category_id": "L03",
    "source": "予想問題_変種",
    "format": "五肢択一"
  },
  {
    "question": "屋内貯蔵所の位置、構造及び設備の技術上の基準として、正しいものはどれか。",
    "choices": [
      "貯蔵倉庫は、他の建築物と複合した構造とすることができる。",
      "床面積は2,000m²以下にしなければならない。",
      "地盤面から軒までの高さは8m未満の平屋建としなければならない。",
      "引火点が70℃未満の危険物の貯蔵倉庫には、可燃性蒸気を屋根上に排出する設備を設けなければならない。",
      "屋根は不燃材料で造り、内側に断熱材を張り、天井を設けなければならない。"
    ],
    "correct_index": 3,
    "explanations": [
      "誤り。屋内貯蔵所の貯蔵倉庫は独立した専用の建築物でなければならない。他の建築物との複合は認められない。",
      "誤り。床面積の上限は1,000m²以下である。2,000m²は誤り。",
      "誤り。地盤面から軒までの高さは6m未満の平屋建でなければならない。8mは誤り。",
      "正しい。引火点70℃未満の危険物を貯蔵する倉庫には、内部に滞留した可燃性蒸気を屋根上に排出する設備（換気・排気設備）を設けなければならない。",
      "誤り。屋内貯蔵所の屋根は不燃材料で造り、金属板等の軽量な不燃材料でふき、天井を設けてはならない（天井なし）。断熱材の規定はない。"
    ],
    "advice": "屋内貯蔵所の数字は「床面積1,000m²以下・軒高6m未満」が頻出。引火点70℃未満→蒸気排出設備必要、天井は設けてはならない、の2点もセットで押さえよう。",
    "category_id": "L04",
    "source": "予想問題_変種",
    "format": "五肢択一"
  }
];

async function seedQuizzes() {
  console.log("quizテーブルにデータを投入しています...");
  
  const { data, error } = await supabase
    .from('quiz')
    .insert(quizzes);

  if (error) {
    console.error("エラー:", error.message);
  } else {
    console.log(`${quizzes.length}件のクイズデータを保存しました。`);
  }
}

seedQuizzes();